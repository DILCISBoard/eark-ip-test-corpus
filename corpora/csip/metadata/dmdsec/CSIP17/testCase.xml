<!-- Root element for an individual test case, allows these to be wrapped into
XML lists -->
<testCase xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:noNamespaceSchemaLocation="testCase.xsd" testable="TRUE">
  <!-- Unique ID for the test case -->
  <id specification="E-ARK CSIP" version="2.0-DRAFT" requirementId="CSIP17"/>
  <!-- URL references to requirements for convenient lookup -->
  <references>
    <reference requirementId="CSIP17" URL="http://earkcsip.dilcis.eu/#CSIP17" />
  </references>
  <requirementText>ID	Name and Location	Description and usage	Cardinality and Level
    CSIP17	Descriptive metadata
    dmdSec	Must be used if descriptive metadata for the package content is available. Each descriptive metadata section (dmdSec) contains one description and thus is repeated when more descriptions are available.
    It is possible to transfer metadata in a package using just the descriptive metadata section/or adminstrative metadata section.	0..n
    SHOULD </requirementText>
  <!-- Textual description of the test case, may just be a repeat of the
  requirment text. -->
  <description>This testcase is for requirement CSIP17, which relates to descriptive metadata; the optional dmdSec
    elements in the mets.xml file and to the optional files in the folder metadata/descriptive. The requirement CSIP17
    is not stringent and therefore difficult to test, it is based on conditions and optional elements.
    Quote from CSIP17: Must be used if descriptive metadata for the package content is available. Each descriptive metadata section
    (dmdSec) contains one description and thus is repeated when more descriptions are available. It is possible to
    transfer metadata in a package using just the descriptive metadata section/or adminstrative metadata
    section.</description>
  <!-- List of requirments that this test case depends on in addition to the main requirememt, e.g. general requirments on the form of IDs -->
  <dependencies>
    <!-- Individual test case dependencies listed by ID -->
    <dependency  requirementId="CSIPSTR7" URL="http://earkcsip.dilcis.eu/#41-folder-structure-of-the-csip"/>
  </dependencies>
  <!-- A list of the validation rules derived from the test case -->
  <rules>
    <!-- Individual validation rule entry, identified by a running number that's unique within the test case only -->
    <!-- Rule for the existence of a dmdSec element in mets.xml -->

    <rule id="1">
      <!-- Text description of the validation rule -->
      <description>There should be an XML element named dmdSec in the mets.xml</description>
      <!-- Details of the validation error generated by the message, can be one of: [ ERROR | WARNING | INFO ]-->
      <error level="WARNING">
        <!-- Expected error message when the rule is violated. -->
        <message>The element mets/dmdSec does not exist in METS.xml. It SHOULD be there.</message>
      </error>
      <corpusPackages>
        <!-- Details of corpus packages designed to test this validation rule. -->
        <package name="IP_18000_CSIP17_1" isValid="TRUE">
          <path>/corpora/csip/metadata/dmdSec/CSIP17/IP_18000_CSIP17_1</path>
          <!-- Full description of corpus package features. -->
          <description>A package based on the minimal IP with schemas. Contains no dmdSec in Root METS or Representation METS even though there are files in the metadata folder</description>
        </package>
      </corpusPackages>
    </rule>

    <!-- Rule for consistency between dmdSec and files in the metadata/descriptive folder - can only be a warning due to (too) loose requirement -->
    <rule id="2">
      <!-- Text description of the validation rule -->
      <description>When one or more mets/dmdSec element exist in mets.xml there SHOULD be files in the folder
        metadata/descriptive</description>
      <!-- Details of the validation error generated by the message, can be one of: [ ERROR | WARNING | INFO ]-->
      <error level="WARNING">
        <!-- Expected error message when the rule is violated. -->
        <message>One or more mets/dmdSec elements exist(s). No file(s) found in metadata/descriptive. File(s) SHOULD be
          there.</message>
      </error>
      <corpusPackages>
        <!-- Details of corpus packages designed to test this validation rule. -->
        <package name="IP_18000_CSIP17_2" isValid="TRUE">
          <path>/corpora/csip/metadata/dmdSec/CSIP17/IP_18000_CSIP17_2</path>
          <!-- Full description of corpus package features. -->
          <description>A package based on the minimal IP with schemas. Contains a dmdSec element in mets.xml. Contains
            no files in metadata/descriptive</description>
        </package>
      </corpusPackages>
    </rule>

    <!-- Rule for consistency between files in the metadata/descriptive folder and dmdSec can be of type ERROR due to wording of requirement: 'Must be used if descriptive metadata for the package content is available' -->
    <rule id="3">
      <!-- Text description of the validation rule -->
      <description>When one or more files in the folder metadata/descriptive exist there should be one or more
        mets/dmdSec element(s) in mets.xml</description>
      <!-- Details of the validation error generated by the message, can be one of: [ ERROR | WARNING | INFO ]-->
      <error level="ERROR">
        <!-- Expected error message when the rule is violated. -->
        <message>One or more file(s) found in the directory metadata/descriptive. The dmdSec-element in METS.xml 'Must be used if descriptive metadata for the
          package content is available'</message>
      </error>
      <corpusPackages>
        <!-- Details of corpus packages designed to test this validation rule. -->
        <package name="IP_18000_CSIP17_3" isValid="FALSE">
          <path>/corpora/csip/metadata/dmdSec/CSIP17/IP_18000_CSIP17_3</path>
          <!-- Full description of corpus package features. -->
          <description>A package based on the minimal IP with schemas. Contains no dmdSec in METS.xml. Contains files in the folder
            metadata/descriptive</description>
        </package>
      </corpusPackages>
    </rule>
  </rules>
</testCase>
