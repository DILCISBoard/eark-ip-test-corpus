<!-- Root element for an individual test case, allows these to be wrapped into
XML lists -->
<testCase xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="testCase.xsd"
  testable="UNKNOWN">
  <!-- Unique ID for the test case -->
  <id specification="E-ARK CSIP" version="2.0-DRAFT" requirementId="CSIP20"/>
  <!-- URL references to requirements for convenient lookup -->
  <references>
    <reference requirementId="CSIP20" URL="http://earkcsip.dilcis.eu/#CSIP20"/>
  </references>
  <!-- The full text of the requirement. -->
  <requirementText>Status of the metadata. Used to indicate the currency of the package. If used the two values “SUPERSEDED” or “CURRENT” from the vocabulary is used.
  </requirementText>
  <description>Quote: Status of the metadata. Used to indicate the currency of the package. If used the two values “SUPERSEDED” or “CURRENT” from the vocabulary is used. See also: dmdSec status
  Comment: This testcase is for requirement CSIP20, which relates to descriptive metadata; the optional dmdSec elements in the mets.xml file.
  The requirement CSIP20 is not stringent and therefore difficult to test, it is based on nested conditions - and optional elements.
  I takes two rules to validate the requirement:
  Rule 1: The attribute is optional.
  Rule 2: If the attribute exists the value of it is “SUPERSEDED” or “CURRENT” according to http://earkcsip.dilcis.eu/schema/DILCISVocabulariesIP.xml  
  </description>
  <!-- List of requirments that this test case depends on in addition to the
  main requirememt, e.g. general requirments on the form of IDs -->
  <dependencies>
    <!-- Individual test case dependencies listed by ID -->
    <dependency requirementId="CSIPSTR7" URL="http://earkcsip.dilcis.eu/#41-folder-structure-of-the-csip"/>
    <dependency requirementId="CSIP17" URL="http://earkcsip.dilcis.eu/#533-use-of-the-mets-descriptive-metadata-section-element-dmdsec"/>
    <dependency requirementId="CSIP18" URL="http://earkcsip.dilcis.eu/#533-use-of-the-mets-descriptive-metadata-section-element-dmdsec"/>
  </dependencies>
  <!-- A list of the validation rules derived from the test case -->
  <rules>
    <!-- Individual validation rule entry, identified by a running number that's unique within the test case only -->
    <!-- Rule for the existence of attribute STATUS for element dmdSec in file mets.xml -->
    <rule id="1">
      <!-- Text description of the validation rule -->
      <description>There SHOULD be an STATUS attribute for optional element dmdSec in the mets.xml</description>
      <!-- Details of the validation error generated by the message, can be one of: [ ERROR | WARNING | INFO ]-->
      <error level="WARNING">
        <!-- Expected error message when the rule is violated. -->
        <message>mets/dmdSec/@STATUS does not exists. It SHOULD be there, it is not a MUST.</message>
      </error>
      <corpusPackages>
        <!-- Details of corpus packages designed to test this validation rule. -->
        <package name="IP_18000_CSIP20_1" isValid="FALSE">
          <path>/corpora/csip/metadata/dmdSec/CSIP20/IP_18000_CSIP20_1</path>
          <!-- Full description of corpus package features. -->
          <description>A package based on the minimal IP with schemas. Contains dmdSec without a STATUS attribute</description>
        </package>
      </corpusPackages>
    </rule>

    <!-- Rule for value of optional STATUS attribute for optional element dmdSec in the file mets.xml -->
    <rule id="2">
      <!-- Text description of the validation rule -->
      <description>The value of attribute mets/dmd/@STATUS MUST be either "SUPERSEDED" or "CURRENT"</description>
      <!-- Details of the validation error generated by the message, can be one of: [ ERROR | WARNING | INFO ]-->
      <error level="ERROR">
        <!-- Expected error message when the rule is violated. -->
        <message>The value of optional attribute mets/dmd/@STATUS is invalid. It MUST be either "SUPERSEDED" or "CURRENT".</message>
      </error>
      <corpusPackages>
        <!-- Details of corpus packages designed to test this validation rule. -->
        <package name="IP_18000_CSIP20_2" isValid="FALSE">
          <path>/corpora/csip/metadata/dmdSec/CSIP20/IP_18000_CSIP20_2</path>
          <!-- Full description of corpus package features. -->
          <description>A package based on the minimal IP with schemas. Contains a dmdSec element in mets.xml. Contains a mets/dmd/@STATUS attribute with an invalid value ("CURENT" with one "R" instead of two)</description>
        </package>
        <package name="IP_18000_CSIP20_3" isValid="FALSE">
          <path>/corpora/csip/metadata/dmdSec/CSIP20/IP_18000_CSIP20_3</path>
          <!-- Full description of corpus package features. -->
          <description>A package based on the minimal IP with schemas. Contains a dmdSec element in mets.xml. Contains a mets/dmd/@STATUS attribute with a valid value ("current" = lower case)</description>
        </package>
        <package name="IP_18000_CSIP20_4" isValid="TRUE">
          <path>/corpora/csip/metadata/dmdSec/CSIP20/IP_18000_CSIP20_4</path>
          <!-- Full description of corpus package features. -->
          <description>A package based on the minimal IP with schemas. Contains a dmdSec element in mets.xml. Contains a mets/dmd/@STATUS attribute with a valid value ("CURRENT")</description>
        </package>
        <package name="IP_18000_CSIP20_5" isValid="TRUE">
          <path>/corpora/csip/metadata/dmdSec/CSIP20/IP_18000_CSIP20_5</path>
          <!-- Full description of corpus package features. -->
          <description>A package based on the minimal IP with schemas. Contains a dmdSec element in mets.xml. Contains a mets/dmd/@STATUS attribute with a valid value ("SUPERSEDED")</description>
        </package>
      </corpusPackages>
    </rule>
  </rules>
</testCase>
